<div class="container">
  <div class="page-header">
    <h1>Integrations</h1>
    <p class="subtitle">Choose your architecture and get started in minutes</p>
  </div>

  <!-- Scenario Cards -->
  <div class="scenarios-section">
    <h2>Pick Your Architecture</h2>
    <div class="scenarios-grid">
      <div
        *ngFor="let scenario of scenarios"
        class="scenario-card"
        [class.selected]="selectedScenario?.id === scenario.id"
        (click)="selectScenario(scenario)"
      >
        <div class="scenario-header">
          <h3>{{ scenario.name }}</h3>
          <span class="scenario-badge" *ngIf="scenario.id === 'claude-agent-sdk-vm'">Recommended</span>
        </div>
        <p class="scenario-description">{{ scenario.description }}</p>
        <div class="scenario-meta">
          <div class="meta-item">
            <strong>When to use:</strong>
            <p>{{ scenario.when_to_use }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Selected Scenario Details -->
  <div *ngIf="selectedScenario" class="scenario-details">
    <div class="card">
      <div class="card-header">
        <h2>{{ selectedScenario.name }}</h2>
        <div class="card-actions">
          <button class="btn btn-sm btn-secondary" (click)="toggleDetailed()">
            {{ showDetailed ? 'Hide' : 'Show' }} Detailed Guide
          </button>
          <button class="btn btn-sm btn-primary" (click)="verifyIntegration(selectedScenario)">
            Verify Integration
          </button>
        </div>
      </div>

      <!-- What Spectyra Controls -->
      <div class="section">
        <h3>What Spectyra Controls</h3>
        <ul class="controls-list">
          <li *ngFor="let control of selectedScenario.what_spectyra_controls">{{ control }}</li>
        </ul>
      </div>

      <!-- Quickstart -->
      <div class="section">
        <div class="section-header">
          <h3>{{ selectedScenario.quickstart.title }}</h3>
          <button
            class="btn btn-sm btn-secondary"
            (click)="copyCode(selectedScenario.quickstart.code, selectedScenario.id + '-quickstart')"
          >
            {{ copiedCode === selectedScenario.id + '-quickstart' ? 'âœ“ Copied' : 'Copy' }}
          </button>
        </div>
        <div class="code-block">
          <pre><code [class]="'language-' + selectedScenario.quickstart.language">{{ selectedScenario.quickstart.code }}</code></pre>
        </div>
      </div>

      <!-- Detailed Guide (Expandable) -->
      <div class="section" *ngIf="showDetailed && selectedScenario.detailed_guide">
        <h3>Detailed Guide</h3>
        <div class="guide-content">
          <div class="guide-item">
            <strong>Where does Spectyra run?</strong>
            <p>{{ selectedScenario.detailed_guide.where_runs }}</p>
          </div>
          <div class="guide-item">
            <strong>What changes in code?</strong>
            <p>{{ selectedScenario.detailed_guide.code_changes }}</p>
          </div>
          <div class="guide-item">
            <strong>What data is sent to Spectyra?</strong>
            <p>{{ selectedScenario.detailed_guide.data_sent }}</p>
          </div>
          <div class="guide-item">
            <strong>How does auth work?</strong>
            <p>{{ selectedScenario.detailed_guide.auth_works }}</p>
          </div>
          <div class="guide-item">
            <strong>How to verify it works?</strong>
            <p>{{ selectedScenario.detailed_guide.verify_works }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!selectedScenario" class="empty-state">
    <h3>Select an integration scenario to get started</h3>
    <p>Choose from the cards above to see quickstart code and detailed guides.</p>
  </div>
</div>
