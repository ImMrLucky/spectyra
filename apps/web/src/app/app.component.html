<div class="app-container">
  <!-- Header -->
  <mat-toolbar class="app-header" color="primary">
    <div class="header-left">
      <button
        *ngIf="isAuthenticated"
        mat-icon-button
        (click)="toggleSidebar()"
        class="sidebar-toggle"
        aria-label="Toggle sidebar"
      >
        <mat-icon>menu</mat-icon>
      </button>
      <h1 routerLink="/" class="logo">Spectyra</h1>
    </div>
    
    <div class="header-right">
      <!-- Org/Project Switcher -->
      <ng-container *ngIf="isAuthenticated">
        <app-org-switcher></app-org-switcher>
      </ng-container>
      
      <!-- Auth links -->
      <span *ngIf="!isAuthenticated" class="auth-links">
        <a routerLink="/login">Login</a>
        <a routerLink="/register">Sign Up</a>
      </span>
      <span *ngIf="isAuthenticated" class="auth-links">
        <span class="user-email">{{ userEmail }}</span>
        <button (click)="logout()" class="btn-logout">Logout</button>
      </span>
    </div>
  </mat-toolbar>

  <!-- Sidebar and Main Content -->
  <div class="app-body">
    <mat-sidenav-container class="sidenav-container">
      <!-- Sidebar Navigation -->
      <mat-sidenav
        *ngIf="isAuthenticated"
        #sidenav
        [(opened)]="sidebarOpen"
        mode="side"
        class="app-sidenav"
        [class.collapsed]="sidebarCollapsed"
        [style.width.px]="sidebarCollapsed ? 64 : 240"
      >
        <mat-nav-list>
          <ng-container *ngFor="let item of navItems">
            <a
              mat-list-item
              *ngIf="!item.adminOnly || showAdminLink"
              [routerLink]="item.route"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: item.route === '/overview' }"
              class="nav-item"
              [class.collapsed]="sidebarCollapsed"
            >
              <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
              <span matListItemTitle *ngIf="!sidebarCollapsed">{{ item.label }}</span>
            </a>
          </ng-container>
        </mat-nav-list>
      </mat-sidenav>

      <!-- Main Content -->
      <mat-sidenav-content class="app-main">
        <router-outlet></router-outlet>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
</div>
